<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../static/css/style.css" th:href="@{'/css/style.css'}">
    <link rel="icon" type="image/x-icon" href="../static/favicon.ico" th:href="@{'favicon.ico'}">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <title th:text="#{login}">Login</title>
</head>
<body>
<div class="window">
    <div class="window-body">
        <p class="title" th:text="#{access_restoration}">Access restoration</p>
        <form class="form" id="registerForm" method="post" th:action="@{'/password/restore'}">
            <div class="form-row" th:if="${userNotFoundByEmail != null}">
                <div class="error-container">
                    <span class="material-symbols-outlined error-container-icon">error</span>
                    <span class="error-container-text" th:text="${userNotFoundByEmail}">
                        <span>The email invalid!</span>
                    </span>
                </div>
            </div>
            <div class="form-row" th:if="${passwordRestoreCodeInvalid != null}">
                <div class="error-container">
                    <span class="material-symbols-outlined error-container-icon">error</span>
                    <span class="error-container-text" th:text="${passwordRestoreCodeInvalid}">
                        <span>The password restore code invalid!</span>
                    </span>
                </div>
            </div>
            <div class="form-row" th:if="${passwordRestoreCodeExpired != null}">
                <div class="error-container">
                    <span class="material-symbols-outlined error-container-icon">error</span>
                    <span class="error-container-text" th:text="${passwordRestoreCodeExpired}">
                        <span>The password restore code expired!</span>
                    </span>
                </div>
            </div>
            <div th:if="${userNotFoundByEmail == null &&
                passwordRestoreCodeInvalid == null &&
                passwordRestoreCodeExpired == null}">
                <div class="form-row">
                    <div class="info-container">
                        <span class="material-symbols-outlined info-container-icon">info</span>
                        <span class="info-container-text" th:text="#{you_can_set_a_new_password}">
                        <span>You can set a new password</span>
                    </span>
                    </div>
                </div>
                <div class="form-row password-viewer-context">
                    <input class="form-input password-input" id="password" type="password" name="newPassword">
                    <label class="form-label" for="password" th:text="#{new_password}">New password</label>
                    <span class="material-symbols-outlined password-viewer-icon">visibility</span>
                </div>
                <div class="form-row password-viewer-context">
                    <input class="form-input password-input" id="confirmPassword" type="password"
                           name="confirmNewPassword">
                    <label class="form-label" for="confirmPassword" th:text="#{confirm_new_password}">Confirm new
                        password</label>
                    <span class="material-symbols-outlined password-viewer-icon">visibility</span>
                </div>
                <div class="form-row" th:if="${passwordNotConfirmed != null}">
                    <div class="error-container">
                        <span class="material-symbols-outlined error-container-icon">error</span>
                        <span class="error-container-text" th:text="${passwordNotConfirmed}">
                        <span>The password not confirmed!</span>
                    </span>
                    </div>
                </div>
                <div class="form-row" th:if="${passwordLengthValidation != null}">
                    <div class="error-container">
                        <span class="material-symbols-outlined error-container-icon">error</span>
                        <span class="error-container-text" th:text="${passwordLengthValidation}">
                        <span>The password characters length validation error!</span>
                    </span>
                    </div>
                </div>
                <div class="form-row">
                    <button class="button" th:text="#{restore_access}">Restore access</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="theme-switcher">
    <button class="button button-with-icon button-with-icon-circle" onclick="toggleTheme()">
        <span id="themeIcon" class="material-symbols-outlined button-icon">dark_mode</span>
    </button>
</div>
<script src="../static/js/common.js" th:src="@{'/js/common.js'}"></script>
</body>
</html>